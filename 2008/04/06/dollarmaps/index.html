<!DOCTYPE html><html><head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>DollarMaps: Easy Map Creation for Java</title>
    <link rel="stylesheet" type="text/css" href="/style.css"/>
  </head>
  <body>
    <div class="body">
      <div class="header">
        <div class="title">
          <a href="/">Robbie&#39;s Garbage, Collected.</a>
        </div>
      </div>
      <div class="blog">
        <h1>DollarMaps: Easy Map Creation for Java</h1>
        <div class="date">April 6, 2008</div>
        <div class="entry">

        Inspired by <a href="http://timepedia.blogspot.com/2008/04/gwt-road-to-15-language-features-and.html">GQuery</a>&#39;s syntax,Â  I hacked up some code that uses a similar, dollar sign based syntax for creating Java Map instances. And I have to say that it flows really nicely. But first, let&#39;s &#34;respect the classics&#34; .<br/><pre><br/>Map&lt;Integer, String&gt; map = new HashMap&lt;Integer, String&gt;();<br/>map.put(1, &#34;one&#34;);<br/>map.put(2, &#34;two&#34;);<br/>map.put(3, &#34;three&#34;);<br/><br/>// iterate over all the entries<br/>for (Entry&lt;Integer, String&gt; e : map.entrySet())<br/>    System.out.println(e.getKey() + &#34; &#34; + e.getValue());<br/></pre><br/>So, there are three things to notice here.<br/><ul><br/>	<li>The repeated type parameters on the first line</li><br/>        <li>Having to use three lines of extra code to get the items in</li><br/>        <li>Having to use getKey() and getValue() in the iteration</li><br/></ul><br/>If you didn&#39;t know yet, most of these issues can be solved by using <a href="http://code.google.com/p/google-collections/">Google Collections</a>. But besides that, I think the dollar sign based syntax, which I called DollarMaps, is slightly more elegant than the usual &#34;let&#39;s-do-some-type-inference&#34; factory method.<br/>Creating a HashMap:<br/><pre><br/>        Map&lt;Integer, String&gt; map = $(1,&#34;blah1&#34;)<br/>                                  .$(2, &#34;blah2&#34;)<br/>                                  .$(3, &#34;blah3&#34;).asHashMap();<br/></pre><br/>Iteration:<br/><pre><br/>        for(Entry&lt;Integer, String&gt; e : $(1,&#34;blah1&#34;).$(2, &#34;blah2&#34;)) {<br/>            System.out.println(e.getKey() + &#34; &#34; + e.getValue());<br/>        }<br/></pre><br/>You can even take iteration further if both the key and the value have the same type. I tried some things out and came up with the double dollar sign syntax to enforce that type rule. So easier, array-based iteration:<br/><pre><br/>        for(String[] s : $$(&#34;1&#34;,&#34;blah1&#34;).$(&#34;2&#34;, &#34;blah2&#34;).asEasy()) {<br/>            System.out.println(s[0] + &#34; &#34; + s[1]);<br/>        }<br/></pre><br/>I did not run any performance tests (I am creating a 2-element array for each entry).<br/>Anyway, I&#39;ll have this up for grabs at my <a href="http://code.google.com/p/garbagecollected/">Google Code project</a>. For the impatient, here&#39;s the <a href="https://github.com/robbiev/garbagecollected/raw/master/DollarMaps/dist/DollarMaps-snapshot.zip">download link</a>. Feedback appreciated!
</div>
        <div class="footer">
          <em>Liking this? Follow me <a href="https://mastodon.social/@robbiev">on Mastodon</a>.</em>
        </div>
      </div>
    </div>
  

</body></html>