<!DOCTYPE html><html><head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>DollarMaps: Easy Map Creation for Java</title>
    <link rel="stylesheet" type="text/css" href="/style.css"/>
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml"/>
  </head>
  <body>
    <div class="body">
      <div class="header">
        <div class="title">
          <a href="/">Robbie&#39;s Garbage, Collected.</a>
        </div>
        <input type="checkbox" id="theme-toggle" aria-label="Toggle theme"/>
        <label for="theme-toggle" class="theme-toggle-label"></label>
      </div>
      <div class="blog">
        <h1>DollarMaps: Easy Map Creation for Java</h1>
        <div class="date">April 6, 2008</div>
        <div class="entry">

        <p>Inspired by <a href="http://timepedia.blogspot.com/2008/04/gwt-road-to-15-language-features-and.html">GQuery</a>&#39;s syntax,Â  I hacked up some code that uses a similar, dollar sign based syntax for creating Java Map instances. And I have to say that it flows really nicely. But first, let&#39;s &#34;respect the classics&#34; .</p>
<pre><code>Map&lt;Integer, String&gt; map = new HashMap&lt;Integer, String&gt;();
map.put(1, &#34;one&#34;);
map.put(2, &#34;two&#34;);
map.put(3, &#34;three&#34;);

// iterate over all the entries
for (Entry&lt;Integer, String&gt; e : map.entrySet())
    System.out.println(e.getKey() + &#34; &#34; + e.getValue());
</code></pre>
<p>So, there are three things to notice here.</p>
<ul>
<li>The repeated type parameters on the first line</li>
<li>Having to use three lines of extra code to get the items in</li>
<li>Having to use getKey() and getValue() in the iteration</li>
</ul>
<p>If you didn&#39;t know yet, most of these issues can be solved by using <a href="http://code.google.com/p/google-collections/">Google Collections</a>. But besides that, I think the dollar sign based syntax, which I called DollarMaps, is slightly more elegant than the usual &#34;let&#39;s-do-some-type-inference&#34; factory method.</p>
<p>Creating a HashMap:</p>
<pre><code>Map&lt;Integer, String&gt; map = $(1,&#34;blah1&#34;)
                          .$(2, &#34;blah2&#34;)
                          .$(3, &#34;blah3&#34;).asHashMap();
</code></pre>
<p>Iteration:</p>
<pre><code>for(Entry&lt;Integer, String&gt; e : $(1,&#34;blah1&#34;).$(2, &#34;blah2&#34;)) {
    System.out.println(e.getKey() + &#34; &#34; + e.getValue());
}
</code></pre>
<p>You can even take iteration further if both the key and the value have the same type. I tried some things out and came up with the double dollar sign syntax to enforce that type rule. So easier, array-based iteration:</p>
<pre><code>for(String[] s : $$(&#34;1&#34;,&#34;blah1&#34;).$(&#34;2&#34;, &#34;blah2&#34;).asEasy()) {
    System.out.println(s[0] + &#34; &#34; + s[1]);
}
</code></pre>
<p>I did not run any performance tests (I am creating a 2-element array for each entry).
Anyway, I&#39;ll have this up for grabs at my <a href="http://code.google.com/p/garbagecollected/">Google Code project</a>. For the impatient, here&#39;s the <a href="https://github.com/robbiev/garbagecollected/raw/master/DollarMaps/dist/DollarMaps-snapshot.zip">download link</a>. Feedback appreciated!</p>
</div>
        <div class="footer">
          <em>Liking this? Follow me: <a href="/rss.xml">RSS</a>, <a href="https://bsky.app/profile/robbiev.me">Bluesky</a>, <a href="https://mastodon.social/@robbiev">Mastodon</a>.</em>
        </div>
      </div>
    </div>
  

</body></html>